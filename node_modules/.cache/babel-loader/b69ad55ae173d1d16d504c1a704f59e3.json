{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/User/Documents/devProjects/sudokuManiac/sudoku_app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/Documents/devProjects/sudokuManiac/sudoku_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/Documents/devProjects/sudokuManiac/sudoku_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useRef,useContext}from'react';import{UserContext}from'../userContext';import'./styles.css';import Controls from'../components/Controls';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Board(props){var _useContext=useContext(UserContext),solvedBoard=_useContext.solvedBoard,currentBoard=_useContext.currentBoard,isSolved=_useContext.isSolved,SetIsSolved=_useContext.SetIsSolved,SetHintCounter=_useContext.SetHintCounter;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),hintsCount=_useState2[0],SetHintsCount=_useState2[1];var refs=useRef(null);refs.current=document.getElementsByClassName('SudokuBlock')[2];var liveBoard=[];var anwser=[];var hintsFromControls=0;function handleMovement(_x,_x2){return _handleMovement.apply(this,arguments);}function _handleMovement(){_handleMovement=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e,idx){var currentBox;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:currentBox=document.getElementsByClassName('SudokuBlock')[idx];_context.t0=true;_context.next=_context.t0===(e.keyCode===38&&idx>8)?4:_context.t0===(e.keyCode===37&&idx>0)?7:_context.t0===(e.keyCode===39&&idx<80)?10:_context.t0===(e.keyCode===40&&idx<72)?13:_context.t0===(e.key>=1&&e.key<=9&&isNaN(parseInt(liveBoard[idx])))?16:_context.t0===((e.keyCode===46||e.keyCode===8)&&currentBox.innerText!==liveBoard[idx])?20:22;break;case 4:refs.current=document.getElementsByClassName('SudokuBlock')[idx-9];refs.current.focus();return _context.abrupt(\"break\",23);case 7:refs.current=document.getElementsByClassName('SudokuBlock')[idx-1];refs.current.focus();return _context.abrupt(\"break\",23);case 10:refs.current=document.getElementsByClassName('SudokuBlock')[idx+1];refs.current.focus();return _context.abrupt(\"break\",23);case 13:refs.current=document.getElementsByClassName('SudokuBlock')[idx+9];refs.current.focus();return _context.abrupt(\"break\",23);case 16:document.getElementsByClassName('SudokuBlock')[idx].innerText=e.key;anwser[idx]=parseInt(e.key);checkSolution(hintsFromControls);return _context.abrupt(\"break\",23);case 20:document.getElementsByClassName('SudokuBlock')[idx].innerText='';return _context.abrupt(\"break\",23);case 22:return _context.abrupt(\"return\");case 23:case\"end\":return _context.stop();}}},_callee);}));return _handleMovement.apply(this,arguments);}function printBoard(board){for(var i=0;i<board.length;i++){for(var j=0;j<board[i].length;j++){if(board[i][j]===0){liveBoard.push('  ');}else{liveBoard.push(board[i][j]);}}}anwser=[].concat(liveBoard);// const array = anwser.map(a => ({...a}));\nreturn liveBoard.map(function(item,idx){return/*#__PURE__*/_jsx(\"div\",{id:idx,ref:refs[idx],tabIndex:\"0\",className:\"SudokuBlock\",onClick:function onClick(e){return handleClick(e,idx);},onKeyDown:function onKeyDown(e){return handleMovement(e,idx);},children:item},idx);});}var board=printBoard(currentBoard);function handleClick(e,idx){// focus clicked div + put as refs.current\nrefs.current=document.getElementsByClassName('SudokuBlock')[idx];refs.current.focus();}function updateHints(){}function checkSolution(hints){// check if player has soulution right\nhintsFromControls=hints;var TempSolvedBoard=solvedBoard;TempSolvedBoard=TempSolvedBoard.flat();var tempArr=document.getElementsByClassName('SudokuBlock');var xAnwser=[];for(var i=0;i<tempArr.length;i++){var text=tempArr[i].innerText;if(text===''){text=tempArr[i].innerText;xAnwser.push(text);}else{text=tempArr[i].innerText;xAnwser.push(parseInt(text));}}if(JSON.stringify(TempSolvedBoard)===JSON.stringify(xAnwser)){SetHintCounter(hintsFromControls);SetIsSolved(function(current){return!current;});}}useEffect(function(){if(!isSolved){checkSolution();}});useEffect(function(){if(liveBoard.length>1){refs.current=document.getElementsByClassName('SudokuBlock')[2];refs.current.focus();}});return/*#__PURE__*/_jsxs(\"div\",{className:\"BoardAndControllerWrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"BoardContainer\",children:board}),/*#__PURE__*/_jsx(\"div\",{className:\"controlWrapper\",children:/*#__PURE__*/_jsx(Controls,{lastRef:refs,liveBoard:liveBoard,checkSolution:checkSolution,isSolved:props.isSolved,switchTheme:props.switchTheme,updateHints:updateHints,SetHintsCount:SetHintsCount,hintsCount:hintsCount})})]});}export default Board;","map":{"version":3,"names":["React","useEffect","useState","useRef","useContext","UserContext","Controls","Board","props","solvedBoard","currentBoard","isSolved","SetIsSolved","SetHintCounter","hintsCount","SetHintsCount","refs","current","document","getElementsByClassName","liveBoard","anwser","hintsFromControls","handleMovement","e","idx","currentBox","keyCode","key","isNaN","parseInt","innerText","focus","checkSolution","printBoard","board","i","length","j","push","map","item","handleClick","updateHints","hints","TempSolvedBoard","flat","tempArr","xAnwser","text","JSON","stringify","switchTheme"],"sources":["C:/Users/User/Documents/devProjects/sudokuManiac/sudoku_app/src/components/SudokuBoard.js"],"sourcesContent":["import React, { useEffect, useState, useRef, useContext } from 'react';\r\nimport { UserContext } from '../userContext';\r\nimport './styles.css';\r\nimport Controls from '../components/Controls';\r\n\r\nfunction Board(props) {\r\n  const { solvedBoard, currentBoard,isSolved, SetIsSolved, SetHintCounter } =\r\n    useContext(UserContext);\r\n  const [hintsCount, SetHintsCount] = useState(0);\r\n\r\n  let refs = useRef(null);\r\n  refs.current = document.getElementsByClassName('SudokuBlock')[2];\r\n  let liveBoard = [];\r\n  let anwser = [];\r\n  let hintsFromControls = 0;\r\n\r\n  async function handleMovement(e, idx) {\r\n    let currentBox = document.getElementsByClassName('SudokuBlock')[idx];\r\n    switch (true) {\r\n      case e.keyCode === 38 && idx > 8:\r\n        refs.current = document.getElementsByClassName('SudokuBlock')[idx - 9];\r\n        refs.current.focus();\r\n        break;\r\n      case e.keyCode === 37 && idx > 0:\r\n        refs.current = document.getElementsByClassName('SudokuBlock')[idx - 1];\r\n        refs.current.focus();\r\n        break;\r\n      case e.keyCode === 39 && idx < 80:\r\n        refs.current = document.getElementsByClassName('SudokuBlock')[idx + 1];\r\n        refs.current.focus();\r\n        break;\r\n      case e.keyCode === 40 && idx < 72:\r\n        refs.current = document.getElementsByClassName('SudokuBlock')[idx + 9];\r\n        refs.current.focus();\r\n        break;\r\n      case e.key >= 1 && e.key <= 9 && isNaN(parseInt(liveBoard[idx])):\r\n        document.getElementsByClassName('SudokuBlock')[idx].innerText = e.key;\r\n        anwser[idx] = parseInt(e.key);\r\n        checkSolution(hintsFromControls);\r\n        break;\r\n      case (e.keyCode === 46 || e.keyCode === 8) &&\r\n        currentBox.innerText !== liveBoard[idx]:\r\n        document.getElementsByClassName('SudokuBlock')[idx].innerText = '';\r\n        break;\r\n\r\n      default:\r\n       return;\r\n    }\r\n  }\r\n\r\n  function printBoard(board) {\r\n    for (let i = 0; i < board.length; i++) {\r\n      for (let j = 0; j < board[i].length; j++) {\r\n        if (board[i][j] === 0) {\r\n          liveBoard.push('  ');\r\n        } else {\r\n          liveBoard.push(board[i][j]);\r\n        }\r\n      }\r\n    }\r\n    anwser = [...liveBoard];\r\n    // const array = anwser.map(a => ({...a}));\r\n    return liveBoard.map((item, idx) => (\r\n      <div\r\n        key={idx}\r\n        id={idx}\r\n        ref={refs[idx]}\r\n        tabIndex='0'\r\n        className='SudokuBlock'\r\n        onClick={(e) => handleClick(e, idx)}\r\n        onKeyDown={(e) => handleMovement(e, idx)}\r\n      >\r\n        {item}\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  let board = printBoard(currentBoard);\r\n\r\n  function handleClick(e, idx) {\r\n    // focus clicked div + put as refs.current\r\n    refs.current = document.getElementsByClassName('SudokuBlock')[idx];\r\n    refs.current.focus();\r\n  }\r\n\r\n  function updateHints() {}\r\n\r\n  function checkSolution(hints) {\r\n    // check if player has soulution right\r\n    hintsFromControls = hints;\r\n\r\n    let TempSolvedBoard = solvedBoard;\r\n    TempSolvedBoard = TempSolvedBoard.flat();\r\n\r\n    const tempArr = document.getElementsByClassName('SudokuBlock');\r\n\r\n    let xAnwser = [];\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      let text = tempArr[i].innerText;\r\n      if (text === '') {\r\n        text = tempArr[i].innerText;\r\n        xAnwser.push(text);\r\n      } else {\r\n        text = tempArr[i].innerText;\r\n        xAnwser.push(parseInt(text));\r\n      }\r\n    }\r\n\r\n    if (JSON.stringify(TempSolvedBoard) === JSON.stringify(xAnwser)) {\r\n      SetHintCounter(hintsFromControls);\r\n      SetIsSolved((current) => !current);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(!isSolved){checkSolution();}\r\n  },);\r\n\r\n  useEffect(() => {\r\n    if (liveBoard.length > 1) {\r\n      refs.current = document.getElementsByClassName('SudokuBlock')[2];\r\n      refs.current.focus();\r\n    }\r\n  }, );\r\n\r\n  return (\r\n    <div className='BoardAndControllerWrap'>\r\n      <div className='BoardContainer'>{board}</div>\r\n      <div className='controlWrapper'>\r\n        <Controls\r\n          lastRef={refs}\r\n          liveBoard={liveBoard}\r\n          checkSolution={checkSolution}\r\n          isSolved={props.isSolved}\r\n          switchTheme={props.switchTheme}\r\n          updateHints={updateHints}\r\n          SetHintsCount={SetHintsCount}\r\n          hintsCount={hintsCount}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Board;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}